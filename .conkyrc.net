# Purpose: Net usage
own_window yes
own_window_class Conky
own_window_transparent yes
own_window_type desktop
#
# fonts & colors
default_color ffd700
default_outline_color 000000
draw_outline yes
draw_shades no
color1 A6FF00
color2 FF5900
use_xft yes
font DejaVu Sans Mono:size=8
#
# 1280 / 3 ~= 426
maximum_width 200 
minimum_size 300 150
short_units yes

lua_load ~/scripts/conky/network.lua
lua_startup_hook        startup wlan0
#lua_draw_hook_pre       draw_pre wlan0
# ${exec iwlist wlan0 rate| awk 'BEGIN {FS="[ :]+"} /Current/ {byps = $5 / 8; print byps,$6}'}
TEXT
${if_gw wlan0}${color2}${font Lucida Grande:size=12}Send-Q ${totaldown wlan0}${color} / ${upspeed wlan0}${font}
${execi 5 netstat --tcp --numeric-hosts --program 2>/dev/null | grep ESTABLISHED | awk ' { sum[ $7 ] += $3; count[ $7 ]++ } END { for ( s in sum ) printf "%7d %dx %s\n", sum[ s ], count[ s ], s }' | sort --numeric --key=1 --reverse | head --lines=15 }
${color2}${font Lucida Grande:size=12}Recv-Q ${totalup wlan0}${color} / ${downspeed wlan0}${font}
${execi 5 netstat --tcp --numeric-hosts --program 2>/dev/null | grep ESTABLISHED | awk ' { sum[ $7 ] += $2; count[ $7 ]++ } END { for ( s in sum ) printf "%7d %dx %s\n", sum[ s ], count[ s ], s }' | sort --numeric --key=1 --reverse | head --lines=15 }
${lua tribar wlan0 20M}
${endif}